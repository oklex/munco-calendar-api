(this["webpackJsonpmunco-calendar-web"]=this["webpackJsonpmunco-calendar-web"]||[]).push([[0],{43:function(e,t,a){e.exports=a(91)},48:function(e,t,a){},55:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},86:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(39),i=a.n(l),s=a(5),c=a(10),u=a(12),m=a(11),d=(a(48),a(22)),p=a(3),f=a(18),v=a.n(f),h=(a(55),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"errorPage"},o.a.createElement(v.a,null,o.a.createElement("meta",{name:"robots",content:"noindex"})),o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,o.a.createElement("span",{role:"img","aria-label":"thinking-emoji"},"\ud83e\udd14")),o.a.createElement("h1",null,"404"),o.a.createElement("p",null,"page not found  -  ",o.a.createElement(d.b,{to:"/",className:"btn-gold"},"Go back to home"))))}}]),a}(o.a.Component)),g=a(14),E=a.n(g),b=a(20),w=(a(59),a(9)),D=a.n(w);a(61);!function(e){e.WAITING="waiting",e.OPEN="open",e.CLOSED="closed"}(n||(n={}));var y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={currentDate:e.props.currentDate?e.props.currentDate:new Date,startMoment:D()(e.props.startDate).startOf("day"),endMoment:D()(e.props.endDate).endOf("day"),startDateText:D()(e.props.startDate).format("(dddd), MMM Do"),endDateText:D()(e.props.endDate).format("(dddd), MMM Do"),oneWeekFromNow:D()(new Date).add(7,"days"),timerBarClass:null,timerDisplayDate:null,timerDescription:null,timerDaysRemaining:null},e.componentDidMount=function(){var t=e.getDaysUntil(e.state.endMoment.toDate());if(e.setState({timerDaysRemaining:"[ "+t+" days remaining ]"}),e.state.endMoment.isBefore())e.setState({timerBarClass:n.CLOSED,timerDisplayDate:e.props.endDate,timerDescription:"closed on "+e.state.endDateText});else if(e.state.startMoment.isBefore())e.state.endMoment.isSame(D()(),"day")&&e.state.endMoment.isSame(D()(),"month")?e.setState({timerBarClass:n.OPEN,timerDisplayDate:e.props.endDate,timerDescription:"closing today! "+e.state.endDateText}):e.state.endMoment.isBefore(e.state.oneWeekFromNow)?e.setState({timerBarClass:n.OPEN,timerDisplayDate:e.props.endDate,timerDescription:"closing soon; on "+e.state.endDateText}):e.setState({timerBarClass:n.OPEN,timerDisplayDate:e.props.endDate,timerDescription:"started; closing on "+e.state.endDateText});else{if(!e.state.startMoment.isAfter())throw Error("dates comparisons failed");e.setState({timerBarClass:n.WAITING,timerDisplayDate:e.props.startDate,timerDescription:"opens on "+e.state.startDateText})}},e.renderDateDescription=function(){return o.a.createElement("p",{className:"weight-300 miniText"},e.state.timerDescription,o.a.createElement("br",null),e.state.timerDaysRemaining)},e.renderTimerBar=function(){if(e.state.timerBarClass&&e.state.timerDisplayDate){var t=e.state.timerDisplayDate,a=e.getDaysUntil(t);return a>21?o.a.createElement("div",{className:e.state.timerBarClass+"-full"}):o.a.createElement("div",{className:e.state.timerBarClass},e.renderSegments(a))}return o.a.createElement("div",null,"no data")},e.renderSegments=function(t){for(var a=[],n=0;n<t;n++)a.push(o.a.createElement("div",{key:n,className:"s-"+n+" segment segment-"+e.state.timerBarClass}));return a},e.getDaysUntil=function(t){var a=D()(t),n=D()(e.state.currentDate),r=a.diff(n)/864e5;return Math.ceil(r)},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"date-indicator"},this.renderTimerBar()),this.renderDateDescription())}}]),a}(o.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).renderTitle=function(){return o.a.createElement("div",{className:"title"},o.a.createElement("h1",null,e.props.CardDetails.organization.short_name),o.a.createElement("p",{className:"blueText miniText"},e.props.CardDetails.organization.full_name))},e.showEvents=function(){return e.props.CardDetails.events?e.props.CardDetails.events.map(e.renderSingleEvent):o.a.createElement("div",null)},e.renderSingleEvent=function(t){var a=D.a.utc(t.start_date),n=a.format("(dddd), MMM Do"),r=a.format(", YYYY"),l=n+r;t.end_date&&(l=n+D.a.utc(t.end_date).format(" - (dddd), MMM Do")+r);return o.a.createElement("div",{className:"eventDetails"},o.a.createElement("p",{className:"blueText"},l),o.a.createElement("p",{className:"miniText"},t.venue_name,", ",t.venue_city),e.showEventTags(t))},e.showEventTags=function(e){if(e.tags.length>0)return e.tags.map((function(t,a){var n=e.tags[a];return o.a.createElement("span",{key:a,className:"tag"},o.a.createElement("p",null,n))}))},e.renderApplications=function(){if(e.props.CardDetails.applications)return e.props.CardDetails.applications.map(e.renderSingleApplication)},e.renderSingleApplication=function(e,t){var a="";return e.cost&&(a="$"+e.cost.toString()),o.a.createElement("div",{className:"AppDetails",key:t},o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("h5",{className:"weight-400"},e.name," ",a),o.a.createElement("span",null,o.a.createElement("button",null,o.a.createElement("a",{className:"applyBtn",href:e.applicationLink,target:"_blank",rel:"noopener noreferrer"},"Apply")))),o.a.createElement(y,{key:t,startDate:e.start_date,endDate:e.end_date}))},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"CalendarCard"},this.renderTitle(),this.showEvents(),this.renderApplications())}}]),a}(o.a.Component),C=a(41),k=a.n(C).a.create({baseURL:"https://munco-calendar.herokuapp.com/"});var A,O={getAll:function(){return Object(b.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/api/applications/all");case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getUpcoming:function(){return Object(b.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/api/applications/upcoming");case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}};!function(e){e[e.name=0]="name",e[e.application=1]="application",e[e.event=2]="event"}(A||(A={}));var x,j=O,M=(a(78),a(42));!function(e){e.allApps="All Applications",e.staffApps="Staff Applications",e.secretariatApps="Secretariat Applications",e.delegateRegistration="Delegate Registration",e.volunteer="Volunteer Opportunities"}(x||(x={}));var T=[x.allApps,x.staffApps,x.secretariatApps,x.delegateRegistration,x.volunteer],S=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={allCalendarEvents:[],selectedFilter:x.allApps,loading:!0},e.componentDidMount=Object(b.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getAll();case 2:a=t.sent,e.setState({allCalendarEvents:a,loading:!1});case 4:case"end":return t.stop()}}),t)}))),e.renderArrow=function(e,t){return o.a.createElement("div",{className:t},e)},e.showAllCards=function(){return!0===e.state.loading?o.a.createElement("div",{className:"errorMessage"},o.a.createElement("h3",null,"Loading...")):0===e.state.allCalendarEvents.length?o.a.createElement("div",{className:"errorMessage"},o.a.createElement("h1",null,"oops \ud83d\ude28"),o.a.createElement("p",null,"we encountered some problem ",o.a.createElement("br",null),"check back later!")):e.state.allCalendarEvents.map((function(e,t){return!e.applications||e.applications&&0===e.applications.length?o.a.createElement("div",{key:t}):o.a.createElement(N,{key:t,CardDetails:e})}))},e.selectFilter=function(){return o.a.createElement("div",{className:"filterBar"},o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",null,o.a.createElement("h2",null,"Filter by: ")),o.a.createElement("div",{className:"flex-grow-1 selection"},o.a.createElement("p",{className:"selectionText"},"Applications"))),o.a.createElement("ul",null,e.showAllFilterOptions()))},e.filterOptions=function(){return o.a.createElement("div",{className:"filterBar"},o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",null,o.a.createElement("h2",null,"Filter by: ")),o.a.createElement("div",{className:"dropdown flex-grow-1 selection"},o.a.createElement("button",{className:"btn selectionBtn selectionText dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.state.selectedFilter),o.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},e.showAllFilterOptions()))))},e.showAllFilterOptions=function(){return T.map((function(t){return t!==e.state.selectedFilter?o.a.createElement("span",{className:"filterOption notAvailable dropdown-item","data-tip":"option not available yet",key:t.toString()},t):null}))},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"ConferenceCalendar"},o.a.createElement(M.a,null),o.a.createElement(v.a,null,o.a.createElement("title",null,"Conference Applications"),o.a.createElement("meta",{name:"description",content:"Calendar for Model UN conferences in BC and internationally. See all dates and site links and more."}),o.a.createElement("link",{rel:"canonical",href:"https://wwww.munco.ca/calendar"})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6 colapseOnMobile"},o.a.createElement("div",{className:"fixed-cover"},o.a.createElement("div",{className:"title"},o.a.createElement("h1",null,"Conference Calendar"),this.filterOptions(),o.a.createElement("div",{className:"menu-tools"},o.a.createElement("div",{className:"menu-tag"},"Do you manage a conference?",o.a.createElement("p",{className:"tooltiptext"},"Tell us what dates you're planning!")),o.a.createElement("div",{className:"menu-tag"},"Report a problem",o.a.createElement("p",{className:"tooltiptext"},"PM us on Facebook or Instagram!")))))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"calendar-section"},this.showAllCards()))))}}]),a}(o.a.Component),B=(a(79),o.a.createContext(null)),F=a(23),R=a.n(F),W=(a(92),a(84),function e(){var t=this;Object(s.a)(this,e),this.auth=void 0,this.messaging=void 0,this.fcmToken=void 0,this.getFCMToken=function(){console.log("Firebase::getFCMToken()"),t.messaging.getToken().then((function(e){if(!(e.length>0))throw Error("bad token");console.log("currentToken: ",e),t.fcmToken=e})).catch((function(e){console.log("An error occurred while retrieving token. ",e)}))};var a={apiKey:"AIzaSyB1fCZW3o0zzeQouUGLx2JAQEWY2FGj63U",authDomain:"munco-calendar.firebaseapp.com",databaseURL:"https://munco-calendar.firebaseio.com",projectId:"munco-calendar",storageBucket:"munco-calendar.appspot.com",messagingSenderId:"686062822496",appId:"1:686062822496:web:b112e8f259c78b5cf30f05"};if(void 0===a.databaseURL)throw console.log("Firebase connection failed"),Error("Firebase configuration failed");try{R.a.initializeApp(a),this.auth=R.a.auth(),this.fcmToken=null,this.messaging=R.a.messaging();var n="BHbu5Ixvg1zawOp5j07xrPh8jzKgXjbz6qLkHIC_WhEQ8D0x2HiBjtFdYzVfQh_lZXx0zlN50jj2RbLw_ExaMQM";this.messaging.usePublicVapidKey(n),console.log("Firebase connected")}catch(r){throw console.log("Firebase connection failed: ",r),r}}),U=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).subButton=function(t){e.context.getFCMToken()},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"subscribePage container"},o.a.createElement("h3",null,"Subscribe to web-notifications"),o.a.createElement("button",{onClick:this.subButton},"set-up web notifications"))}}]),a}(o.a.Component);U.contextType=B;var _=U,I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).show404=function(){return o.a.createElement(h,null)},e.showCalendar=function(){return o.a.createElement(S,null)},e.showSubscribe=function(){return o.a.createElement(_,null)},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(v.a,null,o.a.createElement("meta",{charSet:"utf-8"}),o.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})),o.a.createElement("div",{className:"App"},o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/",component:this.showCalendar}),o.a.createElement(p.a,{exact:!0,path:"/subscribe",component:this.showSubscribe}),o.a.createElement(p.a,{component:this.show404}))))}}]),a}(o.a.Component),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(86),a(87);a(88).config(),i.a.render(o.a.createElement(B.Provider,{value:new W},o.a.createElement(I,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");L?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):P(t,e)}))}}()}},[[43,1,2]]]);
//# sourceMappingURL=main.ab8a2454.chunk.js.map